<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <h1>Добавление данных в БД</h1>
    <h2>Создание модели данных</h2>
    <p>Создадим в корне проекта файл и назовем его <strong>Post.js</strong></p>
    <p>В этом файле нам нужно импортировать <strong>mongoose</strong></p>
    <img src="./img1.jpg" alt="">
    <p>Далее с помощью mongoose.Schema описываем состав документа коллекции</p>
    <img src="./img2.jpg" alt="">
    <h2>Создаем endpoint для post запроса</h2>
    <p>Возвращаемся в index.js и первое что бы делаем - это импортируем нашу схему</p>
    <img src="./img3.jpg" alt="">
    <p>Далее создаем endpoint с методом post</p>
    <img src="./img4.jpg" alt="">
    <p>Endpoint принимает ассинхронную функцию, которая принимает request. С помощью диструктуризации получаем обязательные поля нашей схемы (стр 18) и обращаемся к нашей схеме Post и вызываем метод create (стр 19) куда передаем объект с нашими полями. В результате обращаемся к response и вызывавем метод json. Этот метод что то вернет на клиент в формате JSON, например вернем наш только что созданный документ коллекции.</p>
    <p>После выполненного запроса, можно зайти на mongo и увидеть новую коллекцию Post и там только что созданную запись</p>
    <h2>Обработка ошибок</h2>
    <p>Сейчас если мы передадим в body недостаточное количество полей, то наше приложение упадет. Что бы это избежать обернем наш код в try catch</p>
    <img src="./img5.jpg" alt="">
</body>
</html>