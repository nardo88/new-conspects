<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <h1>Добавление пользователей</h1>
    <p>Meteor уже поставляется с базовой системой аутентификации и управления учетными записями из коробки, поэтому вам нужно только добавить пароль учетной записи, чтобы включить аутентификацию по имени пользователя и паролю:</p>
    <span class="code cp" onclick="navigator.clipboard.writeText(this.textContent)">meteor add accounts-password</span>
    <p>Мы также рекомендуем вам установить модуль узла bcrypt, иначе вы увидите предупреждение о том, что вы используете его реализацию на чистом Javascript.</p>
    <span class="code cp" onclick="navigator.clipboard.writeText(this.textContent)">meteor npm install --save bcrypt</span>
    <h2>Создание акаунта</h2>
    <p>Теперь вы можете создать пользователя по умолчанию для нашего приложения, мы собираемся использовать <b>meteorite</b> в качестве имени пользователя, мы просто создаем нового пользователя при запуске сервера, если мы не нашли его в базе данных.</p>
    <p>Первое что нужно сделать в server / main.js это добавить еще один импорт</p>
    <img src="./img1.jpg" alt="">
    <p>Вот как будет выглядеть наш пользователь по умолчанию:</p>
    <img src="./img2.jpg" alt="">
    <p>Теперь методу Meteor.startup мы можем добавить еще одно условие</p>
    <img src="./img3.jpg" alt="">
    <h2>Создание формы авторизации</h2>
    <p>Создаем обыкновенный компонент с формой</p>
    <img src="./img4.jpg" alt="">

    <h2>Настройка авторизации</h2>
    <p>Наше приложение должно разрешать доступ к функциям управления задачами только аутентифицированному пользователю.</p>
    <p>Мы можем выполнить это, возвращая компонент LoginForm, когда у нас нет аутентифицированного пользователя, в противном случае мы возвращаем форму, фильтр и компонент списка.</p>
    <p>Сначала обернем 3 компонента (форма, фильтр и список) в Fragment. Фрагмент - это специальный компонент в React, который можно использовать для группировки компонентов вместе, не влияя на окончательный DOM.</p>
    <p>Таким образом, вы можете получить своего аутентифицированного пользователя или null из Meteor.user (), вы должны заключить его в ловушку useTracker, чтобы он стал реактивным. Затем вы можете вернуть фрагмент с задачами и всем остальным или LoginForm в зависимости от присутствия пользователя в сеансе или его отсутствия.</p>
    <img src="./img5.jpg" alt="">
    <img src="./img6.jpg" alt="">
    <h2>Модификация серверной части</h2>
    <img src="./img7.jpg" alt="">
    <h2>Log out</h2>
    <p>Мы также можем добавить обработчик onClick для выхода пользователя из системы. Это очень просто, просто вызовите для него Meteor.logout ().</p>
    <img src="./img8.jpg" alt="">
    <p>Принцип там простой, из LocalStorage просто удалится id токена. Полученную функцию вызываем по клику кнопки выхода</p>
    <img src="./img9.jpg" alt="">

</body>
</html>