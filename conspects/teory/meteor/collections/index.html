<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <h1>Collections</h1>
    <p>Meteor уже настроил для нас MongoDB. Чтобы использовать нашу базу данных, нам нужно создать коллекцию, в которой мы будем хранить наши документы, в нашем случае наши задачи.</p>
    <h2>Создание коллекции</h2>
    <p>Мы можем создать новую коллекцию для хранения наших задач, создав новый файл в import / api / TasksCollection.js, который создает экземпляр новой коллекции Mongo и экспортирует ее.</p>
    <img src="./img1.jpg" alt="">
    <p>Обратите внимание, что мы сохранили файл в каталоге import / api, который является местом для хранения кода, связанного с API, например публикаций и методов. Вы можете назвать эту папку как хотите, это просто выбор.</p>

    <h2>Инициализация коллекции</h2>
    <p>Чтобы наша коллекция работала, вам нужно импортировать ее на сервер (т.е. в файл server / main.js).</p>
    <img src="./img2.jpg" alt="">
    <p>Теперь мы будем проверять, есть ли данные в нашей коллекции , в противном случае мы будем добавлять некоторые образцы данных с помощью метода insert.</p>
    <img src="./img3.jpg" alt="">
    <h2>Рендер данных из коллекции</h2>
    <p>Для рендера данных мы будем использовать компонент функции React и хука с именем useTracker из пакета response-meteor-data. При автоматической сборки проекта meteor уже добавляет в node_modules этот пакет, так что нам не придется его устанавливать дополнительно.</p>
    <p>При импорте кода из пакета Meteor единственное отличие от модулей NPM состоит в том, что нам нужно добавить meteor / в части from вашего импорта.</p>
    <p>Функция <b>useTracker</b>, экспортируемая с помощью response-meteor-data, представляет собой React Hook, который позволяет вам иметь реактивность в ваших компонентах React. Каждый раз, когда данные в коллекции изменяются , ваш компонент будет переррисовываться.</p>
    <p>В файлу App.jsx в разделе импортов добавим две строчки:</p>
    <img src="./img4.jpg" alt="">
    <p>Здесь мы испортировали коллецию и хук useTracker</p>
    <p>Теперь что бы получить данные из коллекции мы вызовем функцию useTracker и в качестве аргумента передадим callback который обратится к коллекции и вызовет методы find и fetch</p>
    <img src="./img5.jpg" alt="">
    <p>Данные мы записали в переменную <b>tasks</b> и именно этот массив потом мапим</p>
    <p>Важно заметить то что данные в коллекции у MongoDB автоматом получают уникальный идентификатор, получить этот идентификатор можно обратившись к свойству _id элемента коллекции</p>
    <h2>NoSQLBooster</h2>
    <p>Мы можем подключиться к своей MongoDB с запуском meteor mongo в терминале из папки приложения или с помощью клиента пользовательского интерфейса Mongo, например NoSQLBooster. Наш встроенный MongoDB работает на порту 3001.</p>
    <p>Скачать <b>NoSQLBooster</b> можно здесь <a href="https://nosqlbooster.com/downloads" target="_blank">здесь</a></p>
    <img src="./img6.jpg" alt="">
    <img src="./img7.jpg" alt="">
    <img src="./img8.jpg" alt="">

</body>
</html>