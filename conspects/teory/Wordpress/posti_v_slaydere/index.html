<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>posti_v_slaydere</title>
</head>
<body>
	<h1>Как выводить посты в карусели</h1>
	<p>Допустим что в нашей верстке предусмотрен слайдер с возможными товарами и мы хотим добавлять товары в слайдер динамически. Т.е. в Wordpress добавляем элемент категории товара и он после публикации появляется в слайдере.</p>
	<p>Будем исходить из того. что мы уже создали свой тип записи и настроили в нем возможность добавлять изображение. Так же мы установили плагин, для добавления произвольных полей. В примере мы добавили два произвольных поля, это цена товара (price) и тип (border_type)</p>
	<img src="prim1.jpg" alt="">
	<h2>Разбор верстки</h2>
	<p>Теперь перейдем к нашей верстке. Изначально она выглядела вот так:</p>
	<img src="prim2.jpg" alt="">
	<p>У нас есть блок с идентификатором <b>shopSlider</b> и самое главное - с классом <b>owl-carousel</b>, именно этот класс и делает наш блок оберткой слайдера. (там еще указан класс - shop_slider, он используется для придания дополнительных стилей блоку со слайдером.)</p>
	<p>Внутри нашего блока находится дочерний блок - <b>boards</b> - это и есть элемент слайдера (т.е. один слайд). Внутри этого блока у нас находятся элементы которые будут содержать данные товара. О них поговорим, когда будем заполнять их с помощью PHP</p>
	<h2>Вывод постов в карусели</h2>
	<p>Первое что надо сделать это внутри блока-обертки слайдера открыть php код и объявить переменную <b>args</b> которая будет ассоциативным массивом. В этом массиве будет всего два элемента:
		<ul>
			<li><b>post_type</b> - тип записи (в нашем случае имя нашего типа записи - board, это имя мы указывали в файле functions.php? когда создавали свой тип записи)</li>
			<li><b>publish</b> - опубликована ли запись (булевое значение)</li>
		</ul></p>
	<p>Выглядеть это будет так:</p>
	<xmp>
$args = array(

  'post_type' => 'board',
  'publish' => true,
				
);	

</xmp>
	<img src="prim3.jpg" alt="">
	<p>Затем необходимо создать переменную (имя сами придумываем), которая поместит в себя все наши посты. Помещать все имеющиеся посты будем с помощью функции <b>get_posts()</b> (не путать с get_post()). Входящим параметром функции <b>get_posts()</b> будет наша переменная-массив, которая содержит имя типа записи (board). Выглядиеть это будет вот так:</p>
<xmp>$slider_boards = get_posts($args);</xmp>
<br>
<img src="prim4.jpg" alt="">
<p>Ну а теперь запускаем цикл <b>foreach</b>. Внутрь цикла помещаем нашу верстку (т.е. блок <b>boards</b>)</p>
<xmp>foreach( $slider_boards as $post ){

	ЗДЕСЬ ПОМЕЩАЕТСЯ ВЕРСТКА

}</xmp>

<p>После цикла <b>foreach</b> обязательно прерываем цыкл функцией:</p>
<xmp>wp_reset_postdata(); </xmp>
<p>Важно отметить то, что перед версткой мы прерываем код php, а после верстки снова его открываем.</p>
<h2>Заполнение верски данными</h2>
<p>Для заполнения информацией из поста мы используем стандартные функции php:</p>
<xmp><?php the_title(); ?> - выводит заголовок поста

<?php echo get_the_post_thumbnail_url(get_the_ID(), 'board_size')?> - выводит путь к картинке поста. 
		(board_size - это способ обрезки фотографии, который мы создавали в functions.php - add_image_size)
</xmp>
<p>Теперь, как же нам обращаться к кастомным полям которые мы задавали с помощью плагина? Тут два пути. Либо через функцию the_field() (см. Произвольные поля записей в самом конце), либо более долгим путем:</p>
<p>В этом нам поможет функция <b>get_post_meta</b>. Как это выглядит:</p>
<xmp>$type = get_post_meta( get_the_ID(), 'board_type', true);</xmp>
<p>В переменную <b>$type</b> с помощью функции <b>get_post_meta</b> мы помещаем значение кастомного поля. Как функция понимает какое именно нам нужно поле. Очень просто, входящим параметром это функции являются:
<ul>
	<li><b>get_the_ID()</b> - говорит о том что данные текущего поста</li>
	<li><b>board_type</b> - имя meta данных (это имя мы указывали когда в плагине создавали наши произвольные поля)</li>
	<li><b>true</b> - булевое значение третьего параметра говорит о том, надо ли выводить только значение поля, отвечаем да (true)</li>
</ul>

</p>
<p>Теперь в верстке где должны выводиться данные произвольных поле просто вписываем код php:</p>
<xmp><?php echo $type; ?></xmp>
<p>Вот как теперь выглядит верстка нашей карусели:</p>
<img src="prim5.jpg" alt="">













</body>
</html>