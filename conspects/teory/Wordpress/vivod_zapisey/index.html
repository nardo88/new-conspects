<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<h1>Вывод записей (постов)</h1>

	<!-- Разбор основного цикла -->
	<h2>Часть 1. Стандартный цикл вывода постов из рубрики</h2>



	<p>Посты обычно помещаются в тег <b>&lt;article&gt;</b>.</p>
	<p>В WP предусмотрено так, что бы посты выводились только в отведенных для них <b>рубриках</b> (категориях). Для того что бы отобразить категорию, необходимо либо в навигации меню, либо в виджетах сделать ссылку на рубрику. Допустим у нас есть рубрика с именем "new", в виджетах или в меню мы создаем элемент с сылкой на эту рубрику и после того как мы пройдем по ссылке в адресной строке браузера будет такой адрес: <b>http://localhost/category/new</b>. Далее необходимо создать в папке с темой файл <b>category-new.php</b>. Внутри этого файла мы выводим посты с помощью цикла php о котором будет раасказано чуть ниже. Если у нас будет рубрика cats, то в этом случае имя файля для страницы этой рубрики мы будем называть <b>category-cats.php</b>. Иными словами в названии файла первое слово отображает тип страницы (в нашем случае это рубрика (категория)), далее дефис и имя нашей категории. Со страницами аналогично. Допустим есть страница About, для этой страницы надо создать файл который будет называться <b>page-about.php</b>.</p>
	<p>Теперь рассмотрим как же нам выводить посты в нашей верстке.</p>
	<p>Рассмотрим тело стандартного цикла вывода постов:</p>
	<img src="prim1.jpg" alt="">
	<p>Логика кода: если есть посты текущей рубрики, то запускаем цикл while. В цикле, (пока есть посты) публикуем посты. Тут мы закрываем код php и выводим тег article в котором определяем разметку выводимого поста. У нас есть заголовок h1 в который выводим с помощью функции <b>the_title()</b> название поста. Далее идет превью поста который выводится функцией <b>the_excerpt()</b>. Здесь на примере представлена самая простейшая разметка, но в верстке может быить все намного интереснее, могу выводиться дата поста, автор и т.д. все это будет заключаться в свои блоки и этим блокам могут применяться стили, так наш пост будет принимать красивое оформление.</p>
	<p>После разметки нам надо закрыть цикл hile, а так же оператор if, тоесть мы снова открываем код php вставляем в него закрытие цикла, далее закрываем код php. На следующей строке мы добавляем код php с функцией которая выводит пагинацию страниц. О пагинации поговорим позже. Затем снова открываем php код, помещаем закрытие оператора if и снова закрываем php код. Для чего мы так делаем? то закроем то тут же откроем код php, это нужно для того что бы симитировать выполнение кода php внутри кода. Такой вот каламбур!</p>
	<p>Теперь рассмотрим основные функции php для работы с постами. Эти функции просто возвращают значения нашего поста (записи) которую мы создали в WP.</p>
	<ul>
		<li><b>have_posts()</b> - проверяет наличие записей</li>
		<li><b>the_post()</b> - Устанавливает индексы поста в Цикле WP. Получает следующий пост, переопределяет глобальную переменную $post и устанавливает свойство in the loop в true</li>
		<li><b>the_title()</b> - возвращает название записи</li>
		<li><b>the_content()</b> - возвращает контент (содержимое) записи</li>
		<li><b>the_permalink()</b> - возвращает ссылку записи</li>
		<li><b>the_time('F jS, Y')</b> - возвращает дату создания поста</li>
		<li><b>the_category()</b> - возвращает значение к какой рубрике состоит запись</li>
		<li><b>the_tags()</b> - выводит теги (метки) записи</li>
		<p>У функций the_category() и the_tags() входящим параметром может быть такое значение как $separator. в нем указывается как стоит разделять теги или рубрике в случаях наличия нескольких тегов или рубрик у записи. <a href="https://wp-kama.ru/function/the_category" target="_blank"><b>Тут</b></a> можно почитать подробнее.</p>
		<li><b>the_author()</b> - возвращает имя автора поста</li>
		<li><b>the_posts_pagination()</b> - выводит пагинацию</li>
		<li><b>the_excerpt()</b> - выводит краткое описание поста (как правило это первые 55 слов самой записи)</li>
		<li><b>the_post_thumbnail()</b> - вывод изображения поста</li>
	</ul>
	<br><br><br>


	<!-- работа с изображениями постов -->
	<h2>Отображение изображений записей</h2>
	<p>В админке WP, если мы зайдем в какую-нибудь запись, то справа, в настройках документа у нас не будет доступен виджет для работы с изображениями. для того что бы его добавить необходимо в файле <b>functions.php</b> найти функцию, которая которая вызывается во время ХУК-СОБЫТИЯ <b>after_setup_theme</b> (это функция которая выводит нашу навигацию (меню)). В теле этой функции нам надо добавить строчку:</p>
	<img src="prim2.jpg" alt="">
	<p>
		<ul>
			<li><b>post-thumbnails</b> - добавить виджет работа с изображениями</li>
			<li><b>array('post')</b> - категория посты (тоесть появится только в записях)</li>
		</ul>
	</p>
	<p>Теперь в консоли WP, в редактировании записи появится справа такой виджет:</p>
	<img src="prim3.jpg" alt="">
	<p>После того как загрузили картинку в WP, в верстке надо найти тот тег где указывается картинка записи и вместо тега img добавить код php:</p>
	<img src="prim4.jpg" alt="">
	<p>Теперь картинка отобразится, но отобразится она урезанной. Как можно править размер картинки. Есть два способа:</p>
	<p><span style="font-size: 1.2em; font-weight: bold;">Способ 1.</span> В консоли WP Настройки - Медиафайлы - Размер миниатюры. Здесь указываем нужный нам размер</p>
	<p><span style="font-size: 1.2em; font-weight: bold;">Способ 2.</span> В функцию (в той что добавляли add_theme_support) вставляем такую стоку:</p>
	<img src="prim5.jpg" alt="">
	<p>
		<ul>
			<li><b>post_thumb</b> - имя нашей обрезки</li>
			<li><b>1300</b> - ширина картинки</li>
			<li><b>500</b> - высота картинки</li>
			<li><b>true</b> - нужна ли жесткая обрезка</li>
		</ul>
	</p>
	<p>После этого вывод картинки будет выглядеть уже вот так:</p>
	<img src="prim6.jpg" alt="">
	<p>Т.е. в первый раз мы использовали стандартную обрезку WP, а во втором случае мы создали свою собственную и применили ее.</p>
	<br><br><br>




	<!-- Пагинация -->
	<h2>Пагинация</h2>
	<p>Пагинация - это ссылочки внутри страницы. В случае если у нас 100 записей, на в начтройках стоит что выводить надо не более 10 постов на странице, то внизу появятся ссылочки на остальные записи.</p>
	<p>В цикле вывода постов, между концом цикла while и концом оператора if необходимо вставить следующий код:</p>
	<img src="prim7.jpg" alt="">
	<p>Теперь когда количество постов превысит количество разрешенных отображений записей, внизу появится Пагинация.</p>
	<p>Но в этой пагинации будет выводится название "Навигация по записям", как его убрать?</p>
	<p>Открываем наш файл functions.php и в функцию которая вызывается ХУК-Событием after_setup_theme добавляем следующий код:</p>
	<img src="prim8.jpg" alt="">
	<p>Код этой функции фильтра можно скопировать <a href="https://wp-kama.ru/function/the_posts_pagination" target="_blank">отсюда</a></p>

	<br><br><br>



		<!-- Второй способ вывода постов -->
	<h2>Часть 2. Вывод постов на произвольную страницу</h2>
	<p>Этот способ выводит посты на произвольную страницу, которая не предназначена самим WP для постов.</p>
	<p>В тело страницы помещаем следующий код:</p>
	<img src="prim9.jpg" alt="">
	<p>
		<ul>
			<li><b>$args = array</b> - объявляем массив, элементы которого будут фильтром для записей

				<ul>
					<li><b>numberposts</b> - количество выводимы постов на странице</li>
					<li><b>posts_type</b> - тип постов (post - запись)</li>
					<li><b>suppress_filters</b> - включение этого параметра отменяет/пропускает все фильтры изменение SQL запроса, </li>
				</ul>
			</li>
			<li><b>$posts</b> - объявляем переменную в которую помещаем все записи которые прошли фильтрацию</li>
			<li><b>foreach($posts as $post)</b> - запускаем цикл forech который каждый тик будет выводить запись поста</li>
			<li><b>СТР 198</b> - закрываем код php что бы указать разметку выводимой информаии</li>
			<li><b>СТР 199 - 227</b> - тут помещается разметка</li>
			<li><b>СТР 231</b> - снова открываем код php в котором помещаем конец цикла forech</li>
			<li><b>wp_reset_postdata()</b> - функция которая сбрасывает функцию setup_postdata</li>
		</ul>
	</p>
	<p>В разметке так же используем те же функции что и в первом случае.</p>
	<p>Про цункцию get_posts читаем <a href="https://wp-kama.ru/function/get_posts" target="_blank">ЗДЕСЬ</a></p>


	<br><br><br>
	<h2>Видеоурок вывод на страницу записей с определенной рубрикой</h2>
	<video controls="controls"  width="50%" height="auto"  src="https://firebasestorage.googleapis.com/v0/b/forconspects.appspot.com/o/video%2Fposts.mp4?alt=media&token=235da5c6-eb74-4684-9a31-46ea3c9f86df"></video>
</body>
</html>