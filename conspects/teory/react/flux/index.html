<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flux</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <h1>Flux</h1>
    <p><b>Flux</b> - это принцип, согласно которому изменение в UI происходит <span class="red">ТОЛЬКО</span> после изменения в State. Схематически это выглядит вот так:</p>
    <img style="width: 400px;" src="prim1.jpg" alt="">
    <p>Круговорот происходит <strong>ТОЛЬКО</strong> в одном направлении. Что здесь происходит? Допустим в BLL (Business logic layer) у нас хранится какой-то state (например - это массив объектов). Этот state через props попадает в UI (user interface) и отрисовывается в компоненте. Теперь представим что нам понадобилось изменить данные (добавить еще один пост или комментарий). Мы вводим текст в поле ввода и тем самым мы изменяем UI не изменяя state, а согласно Flux сначала мы должны изменить state и только потом изменять UI. Но как нам изменять state не вводя текста в поле ввода? Как тут быть?</p>
    <p>Для того что бы разобраться рассмотрим пример:</p>
    <h2>Пример</h2>
    <p>У нас есть три файла:</p>
    <ol>
        <li>index.js</li>
        <li>App.js</li>
        <li>List.jsx</li>
    </ol>
    <p>Рассмотрим каждый из них, начнем с <b>index.js</b></p>
    <img src="prim2.jpg" alt="">
    <p>Теперь рассмотрим файл <b>App.js</b></p>
    <img src="prim3.jpg" alt="">
    <p>И наконец смотрим файл <b>List.jsx</b></p>
    <img src="prim4.jpg" alt="">
    <p>Наше приложение работает не по принципу Flux, так как вводя в поле input текст мы меняем UI без изменения state. Для того что бы запретить ввод текст в input добавим ему атрибут value и установим в нем значение по умолчанию</p>
    <img src="prim5.jpg" alt="">
    <p>Теперь если мы попытаемся ввести в input какое-либо значение у нас ничего не выйдет. Теперь надо сделать так, что бы значение по умолчанию в input бралось из state. Для этого в файле index.js создадим переменную и протянем ее через props до компоненты List.jsx</p>
    <img src="prim6.jpg" alt="">
    <p>Теперь через props тянем эту переменную до List.jsx</p>
    <img src="prim7.jpg" alt="">
    <p>После этого у input создаем обработчик события onChange. Это событие будет срабатывать при каждой попытке ввода текста и не важно будет ли текст меняться. Пока нам это не важно. Это событие будет вызывать функцию - <b>changeValue</b></p>
    <img src="prim8.jpg" alt="">
    <p>Теперь в файле index.js (там где у нас state) создаем функцию которая будет изменять нашу переменную:</p>
    <img src="prim9.jpg" alt="">
    <p>Так же через пропсы протягиваем эту функцию до List.js и вызываем ее в функции <b>changeValue</b></p>
    <img src="prim10.jpg" alt="">
    <p>Подытожим что тут происходит. Мы пытаемся вводить данные в input, но отображение у нас запрещено так как стоит значение по умолчанию. Это значение мы получаем из state. Мы обрабатываем событие попытки ввода текста и вместо того что бы отрисовать введенные данные мы сначала их посылаем в state и только затем перерендериваем введенное значение. и только так у нас выполняются принцип FLUX. Сначала изменение в state и только затем рендер в UI. Мы запускаем FLUX круговорот для каждого введенного символа.</p>
</body>
</html>