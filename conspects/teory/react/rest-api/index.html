<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <h1>Rest API</h1>
    <p>REST (от англ. Representational State Transfer — «передача состояния представления») </p>
    <p><b>CRUD</b> - create readr update delete</p>
    <p>Что бы общаться с сервером нам понадобятся 5 сущностей:</p>
    <ol>
        <li><b>URL</b></li>
        <li><b>type request</b> - get, post, put, delete, patch (тип запроса)</li>
        <li><b>request payload</b> - данные которые мы отправляем на сервер</li>
        <li><b>response data</b> - данные которые мы получаем с сервера</li>
        <li><b>HTTP коды</b> - 404 - not found, 5хх - ошибки сервера, 2хх - ок</li>
    </ol>
    <p><b>GET</b> - get запрос нужен, что бы просто получить данные от сервера, он не подразумевает что вместе с ним будут отправлены какие-то данные на сервер (request payload нет)</p>
    <p><b>POST</b> - запрос наоборот подразумевает то, что мы на сервер что-то передаем (например данные формы)</p>
    <p><b>PUT</b> - значит что мы хотим что-то обновить (изменить). (request payload есть)</p>
    <p><b>DELETE</b> - как и get запрос ничего не отправляет на сервер (данных нет). Все что должен передать этот запрос это ID удаляемого элемента, а он зашивается в URL</p>
    <p>Для отправки запросов на сервер можно использовать нативные способы JS (fetch запросы), то если мы используем React то лучше всего использовать библиотеку, которая называется <b>axios</b></p>
    <p>Что бы установить эту библиотеку в терминале вводим команду:</p>
    <span class="code">npm install axios -save</span>
    <h2>Пример из практики</h2>
    <p>У нас есть компонента, которая через пропсы получает callbck функцию, которая в случае если придет из reducer пустой state она пошлет в reduser данные которые будут state-ом по умолчанию.</p>
    <p>Поэтому мы в самом компоненте пишем вот такой код:</p>
    <img src="prim1.jpg" alt="">
    <p>Перед началом работы с axios нужно библиотеку импортировать</p>
    <img src="prim2.jpg" alt="">
    <p>Эту строчку можно прочитать так: импортируем все как axios из библиотеки axios</p>
    <p><b>response</b> которые вернет axios вернет объект с ключами:</p>
    <ul>
        <li>data - данные которые пришли с сервера</li>
        <li>status - статус запроса</li>
        <li>headers - заголовок ответа</li>
    </ul>
    <h2>Типы запросов</h2>
    <h2>GET</h2>
    <p>GET запросы используются когда нам необходимо запросить данные с сервера не отправляя при этом никакких данных. Фильтрация данных происходит с помощью данных которые зашиваются в URL. в конце URL прописывается знак вопроса и затем прописываются данные - ключ : значение разделенные амперсантом. Пример:</p>
    <img src="prim3.jpg" alt="">
    <p>Если для получения определнных данных требуется авторизация, то здесь нам на помощь приходят <b>cookie</b>, в которые сервер прописывает идентификатор и при каждом запросе на сервер cookie цепляются к запросу, сервер считывает идентификатор и на основании него выдает только те данные которые соотвествуют идентификатору. Существуют <b>кроссдоменные запросы</b>, если нам нужно отправить кросдоменный запрос то методу GET мы должны передать помимо URL второй аргумент, это будет объект у которого будет свойство <b>withCredentials</b> со значением true</p>
    <img src="prim4.jpg" alt="">
    <h2>POST</h2>
    <p>POST запросы используются когда нам нужно что-то отправить на сервер, например данные формы что бы пройти авторизацию. POST запросы сложнее обычных GET запросов. В отличии от GET запросов POST запросы отсылают на сервер помимо URL еще два объекта:</p>
    <p><strong>Первый</strong> - может принимать данные которые нам надо отправить на сервер, например те же данные формы обратной связи.</p>
    <p><strong>Второй</strong> - это тот же объект который описывает параметры запроса. Например мы так же можем указать <b>withCredentials</b> - true, что бы привязывать cookie и говорить о том что мы уже авторизованы. Так же мы можем передавать заголовки запросов. Пример:</p>
    <img src="prim5.jpg" alt="">
    <p>О правилах POST запросов мы должны будем читать в технической документации проекта.</p>
    <h2>DELETE</h2>
    <p>DELETE запросы используются когда нам нужно что то удалить. Как и метод GET он не отправляет на сервер данные, он может отправить ID который может быть зашит в URL. Вторым аргументом мы можем передать объект описывающий наш запрос. Структуру заголовков и описание DELETE запроса так же читаем в технической документации проекта. Как бэкендер решит, так и будет.</p>
    <img src="prim6.jpg" alt="">
    <h2>PUT</h2>
    <p>Как и POST запросы PUT могут передавать вместе с запросом тело - данные. Эти данные передаются вторым аргументом в качестве объекта</p>
    <img src="prim7.jpg" alt="">
    <p>Если PUT запрос ничего не возвращает (имеется в виду данные помимо статусов) то что нам тогда диспатчить в санках?</p>
    <img src="prim8.jpg" alt="">



</body>
</html>