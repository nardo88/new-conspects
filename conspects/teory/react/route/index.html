<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <h1>Route, BrowserRouter, машрутизация</h1>
    <p>Рассмотрим ситуацию когда у нас страница разделена вот по такому принципу</p>
    <img src="prim1.jpg" alt="">
    <p>Бокове меню у нас содержит ссылки на разделы нашего приложения. Т.к. у нас SPA (single page application) то мы хотим что бы при нажатии на ссылку в боковом меню содержимое блокас контентом менялось на содержимое выбранного раздела. Делается это при помощи <b>роутинга</b></p>
    <p><b>Route</b> - это пакет, который не входит в состав CRA (create react application). Что бы дополнительно его установить необходимо в терминате выполнить вот такую команду:</p>
    <span class="code">npm install react-router-dom -save</span>
    <p>Для сего нужен <strong>-save</strong>? Что бы в файле <b>package.json</b> прописались зависимости. Что это нам дает? В случае если из репозитория мы склонируем наше приложение оно не запустится без необходимых пакетов из папки <strong>node_modules</strong>. Эти модулы как раз и прописываются в package.json в качестве зависимостей. Все что нам нужно будет сделать - это ввести команду:</p>
    <span class="code">npm install</span>
    <p>и все необходимы пакеты (зависимости) подгрузятся автоматом</p>
    <p>После того как пакет установился нам нужно в компоненте где мы хотим использовать роутинг прописать импорт:</p>
    <img src="prim2.jpg" alt="">
    <p>Здесь мы импортируем два компонента которые экспортированы не по дефолту. Для чего они нужны?</p>
    <p><b>BrowserRouter</b> - в этот тег мы должны обернуть весь наш JSX код, иначе работать роутинг не будет. Вот как это должно выглядеть:</p>
    <img src="prim3.jpg" alt="">
    <p>Теперь обратим внимание на то как мы прописали ссылки в NavBar (это те ссылки по кликам которых будет менятся содержимое блока с контентом). Вот как это выглядит:</p>
    <img src="prim4.jpg" alt="">
    <p>Что здесь особенного? мы тут в отрибуте href прописали путь в виде <b>/path</b>. Ссылка которая должна вести на диалоги получила путь "/dialogs" и т.д.</p>
    <p>Теперь вернемся в наш главный файл App.js. Здесь в раздел wrapper-content мы помещаем столько компонентов <b>Route</b> сколько у нас будет разделов. Вот как это выглядит:</p>
    <img src="prim5.jpg" alt="">
    <p>У компонента Route есть два атрибута:</p>
    <p><b>path</b> - это тот самый путь который мы указали у ссылок</p>
    <p><b>component</b> - в этом атрибуте вы указываем имя компоненты которая будет загружаться при клике по ссылке. (<span class="red">Важно</span> название компоненты мы указываем в фигурных скобках )</p>
    <p>Теперь нам надо сделать так, что бы при клике по ссылке страница не перезагружалась. Для этого мы будем использовать еще одну компоненту библиотеки <strong>react-router-dom</strong> - <b>NavLink</b></p>
    <p>Не забываем импортировать эту компоненту</p>
    <img src="prim6.jpg" alt="">
    <p>Теперь в JSX разметке мы все ссылки (тег a) меняем на тег NavLink. А атрибут <strong>href</strong> мы заменяем на <strong>to</strong> Вот как это теперь выглядит:</p>
    <img src="prim7.jpg" alt="">
    <p><span class="red">Важно</span> подметить что сам react добавляет класс <b>active</b> тем NavLink по которым был произведен клик, <span class="red">НО</span> Если мы используем модульность CSS то не так то просто будет стилизовать NavLink c классом active, т.к. в итоге будет добавлен не active, а абракадабра. Для того что бы решить эту проблему мы должны NavLink добавить еще один атрибут:</p>
    <img src="prim8.jpg" alt="">
    <p><b>activeClassName</b> - здесь указываем имя класса которое будет добавляться активной ссылке, название произвольное, можем назвать как угодно.</p>
    <h2>Второй способ указать компоненту тегу Route</h2>
    <p>Зачем? Если нам необходимо передать <b>props</b> компоненте которую мы указываем в Route, то мы должны использовать вот такой метод:</p>
    <img src="prim9.jpg" alt="">
    <p>Здесь вместо атрибута <b>component</b> мы используем атрибут <b>render</b>, в который поместили callback функцию (анонимную) которая возвращает нам ту компоненту, которую мы хотим. И вот уже это компоненте мы можем передать props в виде атрибута (атрибут test в примере)</p>
    <h2>Третий способ использования Route</h2>
    <p>Мы простооборачиваем в тег <b>Route</b> компоненту которую будем отрисовывать. здесь так же мы указываем атрибут <b>path</b></p>
    <img src="./prim10.jpg" alt="">
    <p>Так же мы можем указать строгое равенство пути в URL, для этого Route просто добавляем атрибут <b>exact</b></p>
    <img src="./prim11.jpg" alt="">
    <p>т.е. в этом примере компонент будет отрисовываться при дефолтном адресе</p>
    <h2>Link или NavLink</h2>
    <p>Из библиотеки <b>react-router-dom</b> мы можем импортировать как обычный Link так и NavLink. Разница в том что NavLink добавляет класс <b>active</b> той ссылке по которой кликнули.</p>
    <h2>Дефолтная страница</h2>
    <p>Что если мы введем в URL адрес который мы не предусмотрели, тогда в компоненте с контентом не отрисуется ни одна компонента. В этом случае мы можем использовать <b>Switch</b>. <Strong>Switch</Strong> - компонент оборачивает все наши роуторы и позволяет группировать маршруты и выбирать хотя бы один из тех которые есть внутри. если ни один и маршрутов не отработал, мы можем сделать какой-то общий случай, например выводить страницу с ошибкой или выводить дефолтную страницу. Для этого последним компонентом необходимо указать Redirect и передать ему атрибут to в котором укажем дефолтный URL</p>
    <p>Импорт Switch</p>
    <img src="./prim12.jpg" alt="">
    <p>Применение</p>
    <img src="./prim13.jpg" alt="">


</body>
</html>