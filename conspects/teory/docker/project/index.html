<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../../../../css/conspects.css">
</head>
<body>
    <h1>Запускаем проект на React внутри докера</h1>
    <p>Предполагается, что мы создали обыкновенное React приложение с помощью create-react-app.</p>
    <p>Первое что нам нужно сделать - это в  корне приложения создать файл с именем <b>Dockerfile</b>. Обращаем внимание, что у этого файла нет никакого расширения. В этом файле мы будем описывать определенные инструкции для создания нашего образа (не контейнера, а именно образа).</p>
    <h2>Ключевые команды</h2>
    <img src="./img1.jpg" alt="">
    <h2>Создание образа</h2>
    <p>После того как мы описали все инструкции, нам необходимо запустить сборку ообраза. Делается это с помощью команды</p>
    <span class="code">docker build .</span>
    <p>Точка означает что мы собираем образ из текущей директории, т.е. оттуда где лежит Dockerfile.</p>
    <h2>Запуск контейнера на основе образа</h2>
    <p>Для начала посмотрим список образов, для того что бы получить ID образа</p>
    <span class="code">docker images</span>
    <img src="./img2.jpg" alt="">
    <p>После этого запускаем образ с помощью команды run</p>
    <span class="code">docker run -p 3000:3000 3304e5306f8f</span>
    <p><b>-p 3000:3000</b> - говорит о том, что мы запускаем докер на 3000 порту, а слушаем у контейнера порт 3000 (второй)</p>
    <p><b>3304e5306f8f</b> - это id образа</p>
    <h2>Кеширование node_modules</h2>
    <p>При каждом билде образа, нам приходится очень долго ждать, пока установятся зависимости. Что бы этого избежать мы можем закешировать node_modules</p>
    <img src="./img3.jpg" alt="">
    <p>Таким образом, если Dockerfile не будет изменен, данные на этапах создания образа будут браться из кеша docker-a</p>
    <img src="./img4.jpg" alt="">
</body>
</html>