<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../../../../css/conspects.css">
</head>
<body>
    <h1>Основные команды</h1>
    <h2>Образы и Контейнеры</h2>
    <p><b>Образ</b> - это некоторый шаблон, на основании которого создается контейнер (докер) image - существует только для чтения, его изменить нельзя. Образы публикуются в DockerHub. Что бы запустить приложение необходимо на основании контейнера создать докер контейнер. </p>
    <p>Для того что бы скачать образ мы можем зайти в DockerHub, найти там необходимый образ и спулить его. Например, вот как будет выглядеть команда скачивания образа Node.js</p>

    <span id="example1" class="code">docker pull node</span>
    <script>
        const elem1 = document.getElementById('example1')

        elem1.addEventListener('click', () => {
            navigator.clipboard.writeText(elem1.textContent)
            elem1.classList.add('code__active')

            setTimeout(() => {
                elem1.classList.remove('code__active')
            }, 2000)
        })
    </script>
    <p>Открываем PowerShell, вводим команду и после этого начнется скачивание образа.</p>
    <h2>Команды</h2>
    <ul>
        <li><b>docker build .</b> - создает образ на основании Dockerfile
            <ul>
                <p>Ключи</p>
                <li><b>-t</b> - позволяет указать имя образа, в дальнейшем мы можем обращаться к образу не по id, а по имени
                    <img src="./img7.jpg" alt="">
                </li>
                <li><b></b></li>
            </ul>
        </li>
        <li><b>docker images</b> - выводит список всех локальных образов</li>
        <li><b>docker ps -a</b> - выводит списко всех контейнеров, в том числе и не запущенных. Если вызвать команду без ключа -a то получим список только запущенных докеров.</li>
        <li><b>docker rm id</b> - удаляет контейнер, где id - это идентификатор контейнера. Можно передавать несколько id сразу</li>
        <li><b>docker container prune</b> - удаляет все имеющиеся контейнеры</li>
        <li><b>docker image prune</b> - удаляет все имеющиеся контейнеры</li>
        <li>
            <b>docker run</b> - запускает образ (не контейнер) из которого создается контейнер. 
            <ul>
                <p>Ключи:</p>
                <li><b>-p 4000:3000</b> - ключ p определяет с какими портами мы будем работать. Первый - на каком порту будет доступен контейнер. Второй - порт который будет прослушиваться внутри контейнера.
                    <img src="./img3.jpg" alt="">
                </li>
                <li><b>-d</b> - detouch, т.е. при запуске контейнера консоль не будет занята и контейнер будет работать в фоновом режиме.
                    <img src="./img4.jpg" alt="">
                
                </li>
                <li><b>--name</b> - позволяет задать имя создаваемому контейнеру/ В дальнейшем мы можем обращаться к контейнеру не по id, а по имени
                    <img src="./img5.jpg" alt="">
                
                </li>
                <li><b>--rm</b> - означает, что как толкьо контейнер остановится, он будет удален
                    <img src="./img6.jpg" alt="">
                </li>
            </ul>
        </li>
        <li><b>docker stop</b> - останавливает запущенный контейнер. После команды stop указывается либо id? либо имя контейнера</li>
        <li><b>docker start</b> - запускает контейнер. Здесь так же нужен либо идентификатор, либо имя контейнера. При запуске мы сразу будем в detouch режиме.</li>
        <li><b>docker attach</b> - позволяет подключиться к консоли запущенного докера. После attach указывается id контейнера.</li>
        <li><b>docker logs</b> - позволяет вывести логи запущенного докера. После attach указывается id контейнера.</li>

    </ul>
    <h2>Работа с образом</h2>
    <p>Для того что бы запустить контейнер на основании имеющегося контейнера необходимо ввести команду:</p>
    <span class="code">docker run <имя_контейнера></span>
    <p>Так же допустимо вместо имени контейнера указывать его идентификатор</p>
    <img src="./img1.jpg" alt="">
    <h3>Ключи:</h3>
    <p><b>-it</b> - говорит о том, что контейнер будет запущен в интерактивном режиме. На примере с node контейнер не завершится сразу после вызова, а мы попадем в консоль node.js который будет запущен внутри контейнера.</p>
    <img src="./img2.jpg" alt="">
    <p>Для того что бы выйти из интерактивного режима необходимо ввести в консоль команду <b>.exit</b></p>
    <h2>.dockerignore</h2>
    <p>Файл <b>.dockerignore</b> так же как и юпшешптщку нужен для того что бы мы не загружали в докер линие файлы. Тогика та же, в этом файле мы указываем какие папки и файлы нам нужно игнорировать</p>

</body>
</html>