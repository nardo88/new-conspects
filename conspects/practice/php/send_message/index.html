<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="own.css">
</head>
<body>
    <h1>Отправка писем на почту (форма обратной связи)</h1>
    <p>Допустим у нас есть форма</p>
    <div class="container">

        <form action="send.php" method="POST" class="form">

            <div class="form__wrapper">
                <input name="name" type="text" class="form__input" placeholder="введите ваше имя" minlength="3" maxlength="10" required>
            </div>
            <div class="form__wrapper">
                <input name="email" type="email" class="form__input" placeholder="введите ваш Email" required>
            </div>
            <div class="form__wrapper">
                <input name="phone" type="tel" class="form__input" placeholder="введите ваш номер телефона" required>
            </div>
            <div class="form__wrapper">
                <textarea name="message" class="form__message" placeholder="введите ваше сообщение" required></textarea>
            </div>

            <button type="submit" class="form__button">SUBMIT</button>
        </form>
    </div>
    <p>Данные с этой формы должны улететь на почту администратора сайта. Для этого мы будем использовать плагин <a href="https://medium.com/@shpaginkirill/%D0%B2%D0%BC%D0%B5%D0%BD%D1%8F%D0%B5%D0%BC%D0%B0%D1%8F-%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%86%D0%B8%D1%8F-%D0%BA-phpmailer-%D0%BE%D1%82%D0%BF%D1%80%D0%B0%D0%B2%D0%BA%D0%B0-%D0%BF%D0%B8%D1%81%D0%B5%D0%BC-%D0%B8-%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2-%D0%BD%D0%B0-%D0%BF%D0%BE%D1%87%D1%82%D1%83-b462f8ff9b5c" target="_blank">PHPMailer</a></p>
    <p>Атрибуты формы:</p>
    <img src="prim5.jpg" alt="">

    <p>Заходим на <a href="https://github.com/PHPMailer/PHPMailer">GitHub PHPMailer</a>, скачиваем оттуда архив, открываем его и здесь нас интересуют три файла, они находятся в папке src: (Exception, PHPMailer и SMTP)</p>
    <p>В папке с проектом создаем новую папку, называем ее <b>phpmailer</b> и в эту папку помещаем эти три файла. Теперь в папке с проектом нам нужно создать файлик, который будет обрабатывать нашу форму. Назовем его send.php. В этот файл мы помещаем код который указан в <a href="https://medium.com/@shpaginkirill/%D0%B2%D0%BC%D0%B5%D0%BD%D1%8F%D0%B5%D0%BC%D0%B0%D1%8F-%D0%B8%D0%BD%D1%81%D1%82%D1%80%D1%83%D0%BA%D1%86%D0%B8%D1%8F-%D0%BA-phpmailer-%D0%BE%D1%82%D0%BF%D1%80%D0%B0%D0%B2%D0%BA%D0%B0-%D0%BF%D0%B8%D1%81%D0%B5%D0%BC-%D0%B8-%D1%84%D0%B0%D0%B9%D0%BB%D0%BE%D0%B2-%D0%BD%D0%B0-%D0%BF%D0%BE%D1%87%D1%82%D1%83-b462f8ff9b5c" target="_blank">инструкции</a> </p>
    <img src="prim1.jpg" alt="">
    <h2>Рассмотрим что там в этом файле</h2>
    <img src="prim2.jpg" alt="">
    <br><br>
    <img src="prim3.jpg" alt="">
    <br><br>
    <img src="prim4.jpg" alt="">
    <br><br>
    <img src="prim6.jpg" alt="">
    <p>smtp сервер лучше использовать гугловый, яндекс помечает письма как спам если в письме будет содержаться адрес email (а так адрес smtp яндекса - smtp.yandex.ru)</p>
    <br>
    <img src="prim7.jpg" alt="">
    <br><br>
    <img src="prim8.jpg" alt="">
    <br><br>
    <img src="prim9.jpg" alt="">
    <p>Этот код полезен, если нам нужно подебажить какие либо ошибки, что бы ошибка отображалась развернуто, то необходимо ракоментировать одну строчку:</p>
    <img src="prim10.jpg" alt="">
    <h2>Дебажим ошибку google</h2>
    <p>При отправке формы мы можем получить вот такую ошибку</p>
    <img style="width: 70%;" src="prim11.jpg" alt="">
    <p>Эта ошибка вызвана тем что google не разрешает роботам использовать свою почту, для исправления заходим в настройки гугл акаунта </p>
    <img src="prim12.jpg" alt="">
    <p>Переходим в настройки безопасности</p>
    <img src="prim13.jpg" alt="">
    <p>ищем раздел "Ненадежные приложения, у которых есть доступ к аккаунту"</p>
    <img src="prim14.jpg" alt="">
    <p>и включаем разрешение Небезопасным приложениям</p>
    <img src="prim15.jpg" alt="">
    <p>После этого письмо отправится как нужно</p>
    <h2>Как создать страницу которая будет отображаться после отправки сообщения</h2>
    <p>Конечно же пользователю не нужно видеть лог с результатом отправки письма, поэтому мы сделаем так что бы после отправки письма, пользователя перебрасывало на страницу с благодарностью.</p>
    <p>Создаем страницу html добавляем туда верстку. Допустим мы назвали этот файл - thankyou.html</p>
    <p>Теперь вместо echo мы должны вставить вот такой код:</p>
    <img src="prim16.jpg" alt="">

</body>
</html>